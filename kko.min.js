!function(t){"use strict";var e=[];"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,n){var o;return e.push(t),"function"==typeof window.createEvent?(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!(!n||!n.bubbles),!(!n||!n.cancelable),n?n.details:null),o):void(document.documentElement["eventProperty"+t]=!1)});var n=function(t,n){var o={},a={},r="storylink://posting?",i="1.0",u={android:"market://details?id=com.kakao.story",ios:"http://itunes.apple.com/app/id486244601"},s="com.kakao.story",l=!1,c="function"==typeof document.addEventListener?!0:!1,d=function(t,e){"function"==typeof document.dispatchEvent?document.dispatchEvent(t):document.documentElement["eventProperty"+e]=!0},p=function(t,n,o){if(c===!0)t.addEventListener(n,o);else{if("load"===n)n="onreadystatechange";else{if(-1!==e.indexOf(n))return document.documentElement.attachEvent("onpropertychange",function(){var t=document.documentElement["eventProperty"+n];t===!0&&o.call(null)});n="on"+n}t.attachEvent(n,o)}},k=new CustomEvent("init"),g=new CustomEvent("login");p(document,"init",function(){l=!0});var m=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")},f=function(t){Kakao.init(t),d(k,"init")};o.init=function(t){if(window.Kakao)f(t);else{var e=document.getElementsByTagName("body")[0],n=document.createElement("script");n.src="https://developers.kakao.com/sdk/js/kakao.min.js",p(n,"load",function(){c===!0?f(t):("loaded"===n.readyState||"complete"===n.readyState)&&f(t)}),void 0===e?p(document,"load",function(){e=document.getElementsByTagName("body")[0],e.insertBefore(n,e.lastChild)}):e.insertBefore(n,e.lastChild)}},o.on=function(t,e){p(document,t,e)},o.login=function(t,e){Kakao.Auth.login({success:function(){Kakao.Auth.getStatus(function(e){a=e,Kakao.API.request({url:"/v1/api/story/isstoryuser"}).then(function(t){return a.isStoryUser=t.isStoryUser,a.isStoryUser?Kakao.API.request({url:"/v1/api/story/profile"}):void 0}).then(function(n){a.kakaoStoryProfile=n,a.status="connected",d(g,"login"),t&&t.call(null,e)})})},fail:function(t){e&&e.call(null,t)}})},o.logout=function(t){Kakao.Auth.logout(function(e){a.status=!1,t&&t.call(null,e)})},o.getInfo={status:function(){return"connected"===a.status?!0:!1},me:function(){if("connected"===a.status&&a.user){var t={};return t.id=a.user.id,t.iskakaoStoryUser=a.isStoryUser,t.kakaoStoryUser&&void 0!==a.kakaoStoryProfile&&(t.kakaoStoryProfile=a.kakaoStoryProfile),Object.keys(a.user.properties).map(function(e){t[e]=a.user.properties[e]}),t}return!1}},o.talk={sendLink:function(t){void 0!==t.image&&(t.image.width=t.image.width||"400",t.image.height=t.image.height||"300"),Kakao.Link.sendTalkLink(t)}},o.story={sendLink:function(t,e,n,o){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/linkinfo",data:{url:t}}).then(function(t){var n={};return n.link_info=t,void 0!==e&&(n.content=e),Kakao.API.request({url:"/v1/api/story/post/link",data:n})}).then(function(t){return Kakao.API.request({url:"/v1/api/story/mystory",data:{id:t.id}})}).then(function(t){n&&n.call(null,t)})},fail:function(t){o&&o.call(null,t)}})},openSharer:function(t,e,n){var o="https://story.kakao.com/share?url=%url";t=encodeURIComponent(t),e=e||400,n=n||480,o=o.replace(/%url/,t),window.open(o,"","width="+e+",height="+n)},openApp:function(e,o,a,l){var c={};c.appId=e,c.apiver=i,c.post=l&&urlFist===!0?o+" "+a:a+" "+o;var d=r+m(c),p="intent:"+d+"#Intent;package="+s+";end;",k=t().os.android?u.android:u.ios;n({urlScheme:d,intentURI:p,storeURL:k,appName:"KakaoStory"})},getStory:function(t,e,n){var o,a,r,i={};if("function"==typeof t)a=t,r=e,i.url="/v1/api/story/mystories";else{if("string"!=typeof t)return{error:"invaild parameters"};o=t,a=e,r=n,i.url="/v1/api/story/mystory",i.data={id:o}}Kakao.Auth.login({success:function(){Kakao.API.request(i).then(function(t){a.call(null,t)})},fail:function(t){r.call(null,t)}})},getStoriesBefore:function(t,e,n){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/mystories",data:{last_id:t}}).then(function(t){e.call(null,t)})},fail:function(t){n.call(null,t)}})}};var y=function(t,e,n,o){t.style.width=e+"px",t.style.height=n+"px",t.style.backgroundImage="url('"+o+"')"},h="https://developers.kakao.com/assets/img/about/";return p(window,"load",function(){for(var t,e=document.getElementsByClassName("kko-login-button"),n=0;t=e[n];n++){var a=t.getAttribute("data-lang"),r=t.getAttribute("data-text"),i=t.getAttribute("data-size"),u=h+"logos/login/";t.style.backgroundColor="transparent",t.style.backgroundRepeat="no-repeat",t.style.border="none",t.style.cursor="pointer","kr"===a?u+="kr/":"en"===a&&(u+="en/"),"short"===r?(u+="kakao_login_btn_","small"===i?(u+="small.png",y(t,70,31,u)):"medium"===i?(u+="medium.png",y(t,121,49,u)):"large"===i&&(u+="large.png",y(t,249,98,u))):"long"===r&&(u+="kakao_account_login_btn_","medium-narrow"===i?(u+="medium_narrow.png",y(t,222,49,u)):"medium-wide"===i?(u+="medium_wide.png",y(t,300,49,u)):"large-narrow"===i?(u+="large_narrow.png",y(t,452,98,u)):"large-wide"===i&&(u+="large_wide.png",y(t,600,98,u))),p(t,"click",o.login)}}),p(window,"load",function(){for(var t,e=document.getElementsByClassName("kko-talk-link-button"),n=function(t){return function(){Kakao.Link.sendTalkLink(t)}},o=0;t=e[o];o++){var a=t.getAttribute("data-label"),r=t.getAttribute("data-src"),i=t.getAttribute("data-width"),u=t.getAttribute("data-height"),s=t.getAttribute("data-text"),l=t.getAttribute("data-url"),c=t.getAttribute("data-size"),d=h+"logos/kakaolink/kakaolink_btn_",k={};t.style.backgroundColor="transparent",t.style.backgroundRepeat="no-repeat",t.style.border="none",t.style.cursor="pointer",k.label=a,r&&(k.image={},k.image.src=r,k.image.width=i||"400",k.image.height=u||"300"),(s||l)&&(k.webButton={},s&&(k.webButton.text=s),l&&(k.webButton.url=l)),"small"===c?(d+="small.png",y(t,34,35,d)):"medium"===c&&(d+="medium.png",y(t,68,69,d));var g=n(k);p(t,"click",g),g=null}}),p(window,"load",function(){for(var t,e=document.getElementsByClassName("kko-story-share-button"),n=function(t,e,n){return function(){o.story.openSharer(t,e,n)}},a=0;t=e[a];a++){var r=t.getAttribute("data-url"),i=t.getAttribute("data-type"),u=t.getAttribute("data-size"),s="",l=t.getAttribute("data-width"),c=t.getAttribute("data-height"),d=h+"buttons/kakaostory/button/",k=n(r,l,c);if("logotype_kr"===i||"logotype_en"===i)switch(d+="logotype/","logotype_kr"===i?d+="kr/story_logotype_kr_"+u+".png":"logotype_en"===i&&(d+="en/story_logotype_en_"+u+".png"),u){case"64":s=222;break;case"96":s=333;break;case"128":s=444;break;case"256":s=888}else if("icon_text"===i)switch(d+="icon_text/story_icon_text_"+u+".png",u){case"64":s=338;break;case"96":s=507;break;case"128":s=676;break;case"256":s=1352}else"web"===i&&(d+="web/kakaostory_web_56x20.png",u=20,s=56);t.style.backgroundColor="transparent",t.style.backgroundRepeat="no-repeat",t.style.border="none",t.style.cursor="pointer",y(t,s,parseInt(u),d),p(t,"click",k),k=null}}),o}(r,i),o=function(t){throw t=t.join(", "),"dependency error: module not found("+t+")"},a=[];if(void 0!==typeof t.daumtools){var r=void 0!==t.daumtools.userAgent?t.daumtools.userAgent:null,i=void 0!==t.daumtools.web2app?t.daumtools.web2app:null;null===r&&a.push("userAgent"),null===i&&a.push("web2app"),a.length>0&&o(a)}else a.push("userAgent"),a.push("web2app"),o(a);"function"==typeof define&&define.amd?define(["kko","userAgent","web2app","exports"],function(t,e,n,o){o.kko=t}):t.kko=n}(window);