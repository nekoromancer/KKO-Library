!function(t){"use strict";var e=[];"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,n){var o;return e.push(t),"function"==typeof window.createEvent?(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!(!n||!n.bubbles),!(!n||!n.cancelable),n?n.details:null),o):void(document.documentElement["eventProperty"+t]=!1)});var n=function(t,n){var o={},a={},r="storylink://posting?",i="1.0",u={android:"market://details?id=com.kakao.story",ios:"http://itunes.apple.com/app/id486244601"},l="com.kakao.story",s=!1,d="function"==typeof document.addEventListener?!0:!1,c=function(t,e){"function"==typeof document.dispatchEvent?document.dispatchEvent(t):document.documentElement["eventProperty"+e]=!0},f=function(t,n,o){if(d===!0)t.addEventListener(n,o);else{if("load"===n)n="onreadystatechange";else{if(-1!==e.indexOf(n))return document.documentElement.attachEvent("onpropertychange",function(){var t=document.documentElement["eventProperty"+n];t===!0&&o.call(null)});n="on"+n}t.attachEvent(n,o)}},p=new CustomEvent("init"),k=new CustomEvent("login");f(document,"init",function(){s=!0});var g=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")},y=function(t){Kakao.init(t),c(p,"init")};o.init=function(t){if(window.Kakao)y(t);else{var e=document.getElementsByTagName("body")[0],n=document.createElement("script");n.src="https://developers.kakao.com/sdk/js/kakao.min.js",f(n,"load",function(){d===!0?y(t):("loaded"===n.readyState||"complete"===n.readyState)&&y(t)}),void 0===e?f(document,"load",function(){e=document.getElementsByTagName("body")[0],e.insertBefore(n,e.lastChild)}):e.insertBefore(n,e.lastChild)}},o.on=function(t,e){f(document,t,e)},o.login=function(t,e){Kakao.Auth.login({success:function(){Kakao.Auth.getStatus(function(e){a=e,Kakao.API.request({url:"/v1/api/story/isstoryuser"}).then(function(t){return a.isStoryUser=t.isStoryUser,a.isStoryUser?Kakao.API.request({url:"/v1/api/story/profile"}):void 0}).then(function(n){a.kakaoStoryProfile=n,a.status="connected","undefined"!=typeof t?(c(k,"login"),t.call(null,e)):(k.userProfile=e,c(k,"login"))})})},fail:function(t){"undefined"!=typeof e&&e.call(null,t)}})},o.logout=function(t){Kakao.Auth.logout(function(e){a.status=!1,"undefined"!=typeof t&&t.call(null,e)})},o.getInfo={status:function(){return"connected"===a.status?!0:!1},me:function(){if("connected"===a.status&&a.user){var t={};return t.id=a.user.id,t.iskakaoStoryUser=a.isStoryUser,t.kakaoStoryUser&&void 0!==a.kakaoStoryProfile&&(t.kakaoStoryProfile=a.kakaoStoryProfile),Object.keys(a.user.properties).map(function(e){t[e]=a.user.properties[e]}),t}return!1}},o.talk={sendLink:function(t){void 0!==t.image&&(t.image.width=t.image.width||"400",t.image.height=t.image.height||"300"),Kakao.Link.sendTalkLink(t)}},o.story={sendLink:function(t,e,n,o){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/linkinfo",data:{url:t}}).then(function(t){var n={};return n.link_info=t,void 0!==e&&(n.content=e),Kakao.API.request({url:"/v1/api/story/post/link",data:n})}).then(function(t){return Kakao.API.request({url:"/v1/api/story/mystory",data:{id:t.id}})}).then(function(t){void 0!==typeof n&&n.call(null,t)})},fail:function(t){void 0!==typeof o&&o.call(null,t)}})},openSharer:function(t,e){Kakao.Story.share({url:t,text:e})},openApp:function(e,o,a,s){var d={};d.appId=e,d.apiver=i,d.post=s&&urlFist===!0?o+" "+a:a+" "+o;var c=r+g(d),f="intent:"+c+"#Intent;package="+l+";end;",p=t().os.android?u.android:u.ios;n({urlScheme:c,intentURI:f,storeURL:p,appName:"KakaoStory"})},getStory:function(t,e,n){var o,a,r,i={};if("function"==typeof t)a=t,r=e,i.url="/v1/api/story/mystories";else{if("string"!=typeof t)return{error:"invaild parameters"};o=t,a=e,r=n,i.url="/v1/api/story/mystory",i.data={id:o}}Kakao.Auth.login({success:function(){Kakao.API.request(i).then(function(t){"undefined"!=typeof a&&a.call(null,t)})},fail:function(t){"undefined"!=typeof r&&r.call(null,t)}})},getStoriesBefore:function(t,e,n){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/mystories",data:{last_id:t}}).then(function(t){"undefined"!=typeof e&&e.call(null,t)})},fail:function(t){"undefined"!=typeof n&&n.call(null,t)}})},followStory:function(t,e,n,o){n=n||!0,o=o||"horizontal",Kakao.Story.createFollowButton({container:t,id:e,showFollowerCount:n,type:o})}};var m=function(t,e,n,o){t.style.width=e+"px",t.style.height=n+"px",t.style.backgroundImage="url('"+o+"')"},v="https://developers.kakao.com/assets/img/about/";return f(window,"load",function(){for(var t,e=document.getElementsByClassName("kko-login-button"),n=function(){return function(){o.login()}},a=0;t=e[a];a++){var r=t.getAttribute("data-lang"),i=t.getAttribute("data-text"),u=t.getAttribute("data-size"),l=v+"logos/login/";t.style.backgroundColor="transparent",t.style.backgroundRepeat="no-repeat",t.style.border="none",t.style.cursor="pointer","kr"===r?l+="kr/":"en"===r&&(l+="en/"),"short"===i?(l+="kakao_login_btn_","small"===u?(l+="small.png",m(t,70,31,l)):"medium"===u?(l+="medium.png",m(t,121,49,l)):"large"===u&&(l+="large.png",m(t,249,98,l))):"long"===i&&(l+="kakao_account_login_btn_","medium-narrow"===u?(l+="medium_narrow.png",m(t,222,49,l)):"medium-wide"===u?(l+="medium_wide.png",m(t,300,49,l)):"large-narrow"===u?(l+="large_narrow.png",m(t,452,98,l)):"large-wide"===u&&(l+="large_wide.png",m(t,600,98,l)));var s=n();f(t,"click",s)}}),f(window,"load",function(){for(var t,e=document.getElementsByClassName("kko-talk-link-button"),n=function(t){return function(){Kakao.Link.sendTalkLink(t)}},o=0;t=e[o];o++){var a=t.getAttribute("data-label"),r=t.getAttribute("data-src"),i=t.getAttribute("data-width"),u=t.getAttribute("data-height"),l=t.getAttribute("data-text"),s=t.getAttribute("data-url"),d=t.getAttribute("data-size"),c=v+"logos/kakaolink/kakaolink_btn_",p={};t.style.backgroundColor="transparent",t.style.backgroundRepeat="no-repeat",t.style.border="none",t.style.cursor="pointer",p.label=a,r&&(p.image={},p.image.src=r,p.image.width=i||"400",p.image.height=u||"300"),(l||s)&&(p.webButton={},l&&(p.webButton.text=l),s&&(p.webButton.url=s)),"small"===d?(c+="small.png",m(t,34,35,c)):"medium"===d&&(c+="medium.png",m(t,68,69,c));var k=n(p);f(t,"click",k),k=null}}),f(window,"load",function(){for(var t,e=document.getElementsByClassName("kko-story-share-button"),n=function(t,e){return function(){o.story.openSharer(t,e)}},a=0;t=e[a];a++){var r=t.getAttribute("data-url"),i=t.getAttribute("data-type"),u=t.getAttribute("data-size"),l=0,s=t.getAttribute("data-text"),d=v+"buttons/kakaostory/button/",c=n(r,s);if("logotype_kr"===i||"logotype_en"===i)switch(d+="logotype/","logotype_kr"===i?d+="kr/story_logotype_kr_"+u+".png":"logotype_en"===i&&(d+="en/story_logotype_en_"+u+".png"),u){case"64":l=222;break;case"96":l=333;break;case"128":l=444;break;case"256":l=888}else if("icon_text"===i)switch(d+="icon_text/story_icon_text_"+u+".png",u){case"64":l=338;break;case"96":l=507;break;case"128":l=676;break;case"256":l=1352}else"web"===i&&(d+="web/kakaostory_web_56x20.png",u=20,l=56);t.style.backgroundColor="transparent",t.style.backgroundRepeat="no-repeat",t.style.border="none",t.style.cursor="pointer",m(t,l,parseInt(u),d),f(t,"click",c),c=null}}),f(window,"load",function(){for(var t,e=document.getElementsByClassName("kko-follow-story"),n=0;t=e[n];n++){var a=t.getAttribute("data-story"),r=t.getAttribute("data-counter")||!0,i=t.getAttribute("data-type")||"horizontal",u=t.getAttribute("id");"true"===r?r=!0:"false"===r&&(r=!1),o.story.followStory("#"+u,a,r,i)}}),o}(r,i),o=function(t){throw t=t.join(", "),"dependency error: module not found("+t+")"},a=[];if(void 0!==typeof t.daumtools){var r=void 0!==t.daumtools.userAgent?t.daumtools.userAgent:null,i=void 0!==t.daumtools.web2app?t.daumtools.web2app:null;null===r&&a.push("userAgent"),null===i&&a.push("web2app"),a.length>0&&o(a)}else a.push("userAgent"),a.push("web2app"),o(a);"function"==typeof define&&define.amd?define(["kko","userAgent","web2app","exports"],function(t,e,n,o){o.kko=t}):t.kko=n}(window);