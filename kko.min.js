!function(t){"use strict";"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,n){var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,!(!n||!n.bubbles),!(!n||!n.cancelable),n?n.details:null),o});var n=t.kko=function(){var t={},n={},o="storylink://posting?",e="1.0",i={android:"market://details?id=com.kakao.story",ios:"http://itunes.apple.com/app/id486244601"},a="com.kakao.story",r=!1,u=document.dispatchEvent,s=document.addEventListener,l=new CustomEvent("init"),c=new CustomEvent("login");s("init",function(){r=!0},!1);var d=function(t){var n=[];for(var o in t)t.hasOwnProperty(o)&&n.push(o+"="+encodeURIComponent(t[o]));return n.join("&")},f=function(t){Kakao.init(t),u(l)};return t.init=function(t){if(window.Kakao)f(t);else{var n=document.getElementsByTagName("body")[0],o=document.createElement("script");o.src="https://developers.kakao.com/sdk/js/kakao.min.js",o.addEventListener("load",function(){f(t)}),n.insertBefore(o,n.lastChild)}},t.on=function(t,n){s(t,n)},t.login=function(t,o){Kakao.Auth.login({success:function(o){Kakao.Auth.getStatus(function(t){n=t,Kakao.API.request({url:"/v1/api/story/isstoryuser"}).then(function(t){return n.isStoryUser=t.isStoryUser,n.isStoryUser?Kakao.API.request({url:"/v1/api/story/profile"}):void 0}).then(function(t){n.kakaoStoryProfile=t,u(c)})}),t&&t.call(null,o)},fail:function(t){o&&o.call(null,t)}})},t.logout=function(t){Kakao.Auth.logout(function(n){t.call(null,n)})},t.getInfo={status:function(){return"connected"===n.status?!0:!1},me:function(){if("connected"===n.status&&n.user){var t={};return t.id=n.user.id,t.iskakaoStoryUser=n.isStoryUser,t.kakaoStoryUser&&void 0!==n.kakaoStoryProfile&&(t.kakaoStoryProfile=n.kakaoStoryProfile),Object.keys(n.user.properties).map(function(o){t[o]=n.user.properties[o]}),t}return!1}},t.talk={sendLink:function(t){void 0!==t.image&&(t.image.width=t.image.width||"300",t.image.height=t.image.height||"400"),Kakao.Link.sendTalkLink(t)}},t.story={sendLink:function(t,n,o,e){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/linkinfo",data:{url:t}}).then(function(t){var o={};return o.link_info=t,void 0!==n&&(o.content=n),Kakao.API.request({url:"/v1/api/story/post/link",data:o})}).then(function(t){return Kakao.API.request({url:"/v1/api/story/mystory",data:{id:t.id}})}).then(function(t){o&&o.call(null,t)})},fail:function(t){e&&e.call(null,t)}})},openSharer:function(t,n,o){var e="https://story.kakao.com/share?url=%url";t=encodeURIComponent(t),n=n||400,o=o||480,e=e.replace(/%url/,t),window.open(e,"","width="+n+",height="+o)},openApp:function(t,n,r,u){var s={};s.appId=t,s.apiver=e,s.post=u&&urlFist===!0?n+" "+r:r+" "+n;var l=o+d(s),c="intent:"+l+"#Intent;package="+a+";end;",f=daumtools.userAgent().os.android?i.android:i.ios;daumtools.web2app({urlScheme:l,intentURI:c,storeURL:f,appName:"KakaoStory"})},getStory:function(t,n,o){var e,i,a,r={};if("function"==typeof t)i=t,a=n,r.url="/v1/api/story/mystories";else{if("string"!=typeof t)return{error:"invaild parameters"};e=t,i=n,a=o,r.url="/v1/api/story/mystory",r.data={id:e}}Kakao.Auth.login({success:function(){Kakao.API.request(r).then(function(t){i.call(null,t)})},fail:function(t){a.call(null,t)}})},getStoriesBefore:function(t,n,o){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/mystories",data:{last_id:t}}).then(function(t){n.call(null,t)})},fail:function(t){o.call(null,t)}})}},t}();"object"==typeof window&&void 0===window.kko&&(window.kko=n)}(window.daumtools="undefined"==typeof window.daumtools?{}:window.daumtools);