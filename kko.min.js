!function(t){"use strict";var n=[];"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,o){var e;return n.push(t),"function"==typeof window.createEvent?(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!(!o||!o.bubbles),!(!o||!o.cancelable),o?o.details:null),e):void(document.documentElement["eventProperty"+t]=!1)});var o=t.kko=function(){var t={},o={},e="storylink://posting?",i="1.0",a={android:"market://details?id=com.kakao.story",ios:"http://itunes.apple.com/app/id486244601"},r="com.kakao.story",u=!1,s="function"==typeof document.addEventListener?!0:!1,c=function(t,n){"function"==typeof document.dispatchEvent?document.dispatchEvent(t):document.documentElement["eventProperty"+n]=!0},l=function(t,o,e){if(s===!0)t.addEventListener(o,e);else{if("load"===o)o="onreadystatechange";else{if(-1!==n.indexOf(o))return document.documentElement.attachEvent("onpropertychange",function(){var t=document.documentElement["eventProperty"+o];t===!0&&e.call(null)});o="on"+o}t.attachEvent(o,e)}},d=new CustomEvent("init"),f=new CustomEvent("login");l(document,"init",function(){u=!0});var m=function(t){var n=[];for(var o in t)t.hasOwnProperty(o)&&n.push(o+"="+encodeURIComponent(t[o]));return n.join("&")},p=function(t){Kakao.init(t),c(d,"init")};return t.init=function(t){if(window.Kakao)p(t);else{var n=document.getElementsByTagName("body")[0],o=document.createElement("script");o.src="https://developers.kakao.com/sdk/js/kakao.min.js",l(o,"load",function(){s===!0?p(t):("loaded"===o.readyState||"complete"===o.readyState)&&p(t)}),void 0===n?l(document,"load",function(){n=document.getElementsByTagName("body")[0],n.insertBefore(o,n.lastChild)}):n.insertBefore(o,n.lastChild)}},t.on=function(t,n){l(document,t,n)},t.login=function(t,n){Kakao.Auth.login({success:function(){Kakao.Auth.getStatus(function(n){o=n,Kakao.API.request({url:"/v1/api/story/isstoryuser"}).then(function(t){return o.isStoryUser=t.isStoryUser,o.isStoryUser?Kakao.API.request({url:"/v1/api/story/profile"}):void 0}).then(function(e){o.kakaoStoryProfile=e,o.status="connected",c(f,"login"),t&&t.call(null,n)})})},fail:function(t){n&&n.call(null,t)}})},t.logout=function(t){Kakao.Auth.logout(function(n){o.status=!1,t&&t.call(null,n)})},t.getInfo={status:function(){return"connected"===o.status?!0:!1},me:function(){if("connected"===o.status&&o.user){var t={};return t.id=o.user.id,t.iskakaoStoryUser=o.isStoryUser,t.kakaoStoryUser&&void 0!==o.kakaoStoryProfile&&(t.kakaoStoryProfile=o.kakaoStoryProfile),Object.keys(o.user.properties).map(function(n){t[n]=o.user.properties[n]}),t}return!1}},t.talk={sendLink:function(t){void 0!==t.image&&(t.image.width=t.image.width||"300",t.image.height=t.image.height||"400"),Kakao.Link.sendTalkLink(t)}},t.story={sendLink:function(t,n,o,e){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/linkinfo",data:{url:t}}).then(function(t){var o={};return o.link_info=t,void 0!==n&&(o.content=n),Kakao.API.request({url:"/v1/api/story/post/link",data:o})}).then(function(t){return Kakao.API.request({url:"/v1/api/story/mystory",data:{id:t.id}})}).then(function(t){o&&o.call(null,t)})},fail:function(t){e&&e.call(null,t)}})},openSharer:function(t,n,o){var e="https://story.kakao.com/share?url=%url";t=encodeURIComponent(t),n=n||400,o=o||480,e=e.replace(/%url/,t),window.open(e,"","width="+n+",height="+o)},openApp:function(t,n,o,u){var s={};s.appId=t,s.apiver=i,s.post=u&&urlFist===!0?n+" "+o:o+" "+n;var c=e+m(s),l="intent:"+c+"#Intent;package="+r+";end;",d=daumtools.userAgent().os.android?a.android:a.ios;daumtools.web2app({urlScheme:c,intentURI:l,storeURL:d,appName:"KakaoStory"})},getStory:function(t,n,o){var e,i,a,r={};if("function"==typeof t)i=t,a=n,r.url="/v1/api/story/mystories";else{if("string"!=typeof t)return{error:"invaild parameters"};e=t,i=n,a=o,r.url="/v1/api/story/mystory",r.data={id:e}}Kakao.Auth.login({success:function(){Kakao.API.request(r).then(function(t){i.call(null,t)})},fail:function(t){a.call(null,t)}})},getStoriesBefore:function(t,n,o){Kakao.Auth.login({success:function(){Kakao.API.request({url:"/v1/api/story/mystories",data:{last_id:t}}).then(function(t){n.call(null,t)})},fail:function(t){o.call(null,t)}})}},t}();"object"==typeof window&&void 0===window.kko&&(window.kko=o)}(window.daumtools="undefined"==typeof window.daumtools?{}:window.daumtools);